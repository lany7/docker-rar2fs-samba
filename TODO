Some notes on colliding ports between host and container:

<larsks> joelpet: give your host another ip address, bind the host services explicitl to the original ip address, and then bind the docker ports to the new ip address.
<cpuguy83> joelpet: Well, you can bind to a specific host interface...so assuming you didn't bind to 0.0.0.0 on the host already, you can do "-p x.x.x.x:135:135", for example.

From 192.168.0.0/24 subnet:
# smbtree -d 3 -N
Connecting to 192.168.0.199 at port 445
Doing spnego session setup (blob length=74)
got OID=1.3.6.1.4.1.311.2.2.10
got principal=not_defined_in_RFC4178@please_ignore
Got challenge flags:
Got NTLMSSP neg_flags=0x608a8215
NTLMSSP: Set final flags:
Got NTLMSSP neg_flags=0x60088215
NTLMSSP Sign/Seal - Initialising with flags:
Got NTLMSSP neg_flags=0x60088215
WORKGROUP
resolve_lmhosts: Attempting lmhosts lookup for name WORKGROUP<0x1d>
resolve_lmhosts: Attempting lmhosts lookup for name WORKGROUP<0x1d>
name_resolve_bcast: Attempting broadcast lookup for name WORKGROUP<0x1d>
Got a positive name query response from 192.168.0.199 ( 192.168.0.199 )
samba_tevent: EPOLL_CTL_DEL EBADF for fde[0x7fb0b84b1250] mpx_fde[(nil)] fd[9] - disabling
Connecting to 192.168.0.199 at port 445
Doing spnego session setup (blob length=74)
got OID=1.3.6.1.4.1.311.2.2.10
got principal=not_defined_in_RFC4178@please_ignore
Got challenge flags:
Got NTLMSSP neg_flags=0x608a8215
NTLMSSP: Set final flags:
Got NTLMSSP neg_flags=0x60088215
NTLMSSP Sign/Seal - Initialising with flags:
Got NTLMSSP neg_flags=0x60088215
    \\SRV-INTELNUC          Samba 4.1.11-Debian
resolve_lmhosts: Attempting lmhosts lookup for name SRV-INTELNUC<0x20>
resolve_lmhosts: Attempting lmhosts lookup for name SRV-INTELNUC<0x20>
resolve_wins: WINS server resolution selected and no WINS servers listed.
resolve_hosts: Attempting host lookup for name SRV-INTELNUC<0x20>
Connecting to 192.168.0.199 at port 445
Doing spnego session setup (blob length=74)
got OID=1.3.6.1.4.1.311.2.2.10
got principal=not_defined_in_RFC4178@please_ignore
Got challenge flags:
Got NTLMSSP neg_flags=0x608a8215
NTLMSSP: Set final flags:
Got NTLMSSP neg_flags=0x60088215
NTLMSSP Sign/Seal - Initialising with flags:
Got NTLMSSP neg_flags=0x60088215
        \\SRV-INTELNUC\IPC$             IPC Service (Samba 4.1.11-Debian)
        \\SRV-INTELNUC\rar2fs           RAR2FS
    \\EFD2E243A43E          Samba 4.1.11-Debian
resolve_lmhosts: Attempting lmhosts lookup for name EFD2E243A43E<0x20>
resolve_lmhosts: Attempting lmhosts lookup for name EFD2E243A43E<0x20>
resolve_wins: WINS server resolution selected and no WINS servers listed.
resolve_hosts: Attempting host lookup for name EFD2E243A43E<0x20>
resolve_hosts: getaddrinfo failed for name EFD2E243A43E [Name or service not known]
name_resolve_bcast: Attempting broadcast lookup for name EFD2E243A43E<0x20>
samba_tevent: EPOLL_CTL_DEL EBADF for fde[0x7fb0b84cb0c0] mpx_fde[(nil)] fd[14] - disabling
samba_tevent: EPOLL_CTL_DEL EBADF for fde[0x7fb0b84cd650] mpx_fde[(nil)] fd[15] - disabling


From 172.17.0.0/16 subnet:
# smbtree -d 3 -N
lp_load_ex: refreshing parameters
Initialising global parameters
params.c:pm_process() - Processing configuration file "/etc/samba/smb.conf"
Processing section "[global]"
added interface eth0 ip=172.17.0.33 bcast=172.17.255.255 netmask=255.255.0.0
resolve_lmhosts: Attempting lmhosts lookup for name WORKGROUP<0x1d>
resolve_lmhosts: Attempting lmhosts lookup for name WORKGROUP<0x1d>
name_resolve_bcast: Attempting broadcast lookup for name WORKGROUP<0x1d>
Got a positive name query response from 172.17.42.1 ( 172.17.42.1 )
Connecting to 172.17.42.1 at port 445
Doing spnego session setup (blob length=74)
got OID=1.3.6.1.4.1.311.2.2.10
got principal=not_defined_in_RFC4178@please_ignore
Got challenge flags:
Got NTLMSSP neg_flags=0x608a8215
NTLMSSP: Set final flags:
Got NTLMSSP neg_flags=0x60088215
NTLMSSP Sign/Seal - Initialising with flags:
Got NTLMSSP neg_flags=0x60088215
WORKGROUP
Connecting to 172.17.42.1 at port 445
Doing spnego session setup (blob length=74)
got OID=1.3.6.1.4.1.311.2.2.10
got principal=not_defined_in_RFC4178@please_ignore
Got challenge flags:
Got NTLMSSP neg_flags=0x608a8215
NTLMSSP: Set final flags:
Got NTLMSSP neg_flags=0x60088215
NTLMSSP Sign/Seal - Initialising with flags:
Got NTLMSSP neg_flags=0x60088215
    \\SRV-INTELNUC          Samba 4.1.11-Debian
resolve_lmhosts: Attempting lmhosts lookup for name SRV-INTELNUC<0x20>
resolve_lmhosts: Attempting lmhosts lookup for name SRV-INTELNUC<0x20>
resolve_wins: WINS server resolution selected and no WINS servers listed.
resolve_hosts: Attempting host lookup for name SRV-INTELNUC<0x20>
resolve_hosts: getaddrinfo failed for name SRV-INTELNUC [Name or service not known]
name_resolve_bcast: Attempting broadcast lookup for name SRV-INTELNUC<0x20>
Got a positive name query response from 172.17.42.1 ( 172.17.42.1 )
Connecting to 172.17.42.1 at port 445
Doing spnego session setup (blob length=74)
got OID=1.3.6.1.4.1.311.2.2.10
got principal=not_defined_in_RFC4178@please_ignore
Got challenge flags:
Got NTLMSSP neg_flags=0x608a8215
NTLMSSP: Set final flags:
Got NTLMSSP neg_flags=0x60088215
NTLMSSP Sign/Seal - Initialising with flags:
Got NTLMSSP neg_flags=0x60088215
        \\SRV-INTELNUC\IPC$             IPC Service (Samba 4.1.11-Debian)
        \\SRV-INTELNUC\print$           Printer Drivers
    \\EFD2E243A43E          Samba 4.1.11-Debian
resolve_lmhosts: Attempting lmhosts lookup for name EFD2E243A43E<0x20>
resolve_lmhosts: Attempting lmhosts lookup for name EFD2E243A43E<0x20>
resolve_wins: WINS server resolution selected and no WINS servers listed.
resolve_hosts: Attempting host lookup for name EFD2E243A43E<0x20>
resolve_hosts: getaddrinfo failed for name EFD2E243A43E [Name or service not known]
name_resolve_bcast: Attempting broadcast lookup for name EFD2E243A43E<0x20>
Got a positive name query response from 172.17.0.30 ( 172.17.0.30 )
Connecting to 172.17.0.30 at port 445
Doing spnego session setup (blob length=74)
got OID=1.3.6.1.4.1.311.2.2.10
got principal=not_defined_in_RFC4178@please_ignore
Got challenge flags:
Got NTLMSSP neg_flags=0x608a8215
NTLMSSP: Set final flags:
Got NTLMSSP neg_flags=0x60088215
NTLMSSP Sign/Seal - Initialising with flags:
Got NTLMSSP neg_flags=0x60088215
        \\EFD2E243A43E\IPC$             IPC Service (Samba 4.1.11-Debian)
        \\EFD2E243A43E\rar2fs           RAR2FS
    \\DISKSTATION           
resolve_lmhosts: Attempting lmhosts lookup for name DISKSTATION<0x20>
resolve_lmhosts: Attempting lmhosts lookup for name DISKSTATION<0x20>
resolve_wins: WINS server resolution selected and no WINS servers listed.
resolve_hosts: Attempting host lookup for name DISKSTATION<0x20>
resolve_hosts: getaddrinfo failed for name DISKSTATION [Name or service not known]
name_resolve_bcast: Attempting broadcast lookup for name DISKSTATION<0x20>
samba_tevent: EPOLL_CTL_DEL EBADF for fde[0x7fc609bbd170] mpx_fde[(nil)] fd[17] - disabling

